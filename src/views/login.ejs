<%- include('layouts/header.ejs') %>

  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky wow slideInDown" data-wow-duration="0.75s" data-wow-delay="0s">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <%- include('navparts/nav.ejs') %>
        </div>
      </div>
    </div>
  </header>
  <!-- ***** Header Area End ***** -->

<br><br>

 <!-----login----->
  <div id="login" class="contact-us section">
    <div class="container">
      <div class="row">
        
        <div class="col-lg-5 align-self-center" style="margin-left: 450px;">

          

          <form id="contact">
            <div class="row">

              <div class="col-lg-13">
              </div>
               <br>
              <div class="col-lg-12">
                <fieldset>
                  <input type="email" name="email" id="email" pattern="[^ @]*@[^ @]*" placeholder="Your Email" required="">
                </fieldset>
              </div>

              <div class="col-lg-12">
                <fieldset>
                  <input type="password" name="password_digest" id="password" placeholder="password" required="">
                </fieldset>
              </div>

              <div class="col-lg-12">
                <fieldset>
                  <button type="submit" id="form-submit" class="main-button">Login</button>
                </fieldset>

                <br>
                 <div style=" color: red; font-size: 16px; text-align: center; font-weight:bold;" id="err"> </div>

                 <!--<div class="card bg-danger text-white" style="display:none;" id="errshow">
                  <div class="card-body" id="err"></div>
                </div>-->
                
                <br>

                <fieldset style="text-align: center;">
                   <h6><a href="Home1.html#contact" class="forgot">Forgot Your Password?</a></h6>
                </fieldset>

                <br>

                <fieldset style="text-align: center;">
                 <h6>Don't Have an Account?<span> <a href="/signup"> Create Account</a></span></h6>
                </fieldset>


              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    
  </div>

  <div class="footer-dec" style="margin-top: 110px;">
    <img src="assets/images/footer-dec.png" alt="">
  </div>

<!----login end------->


 <script>
  const form = document.getElementById('contact');
  const err = document.getElementById('err');

  form.addEventListener('submit', async (e) => {
      e.preventDefault();
        // reset errors
        err.textContent = '';

        // get values
      const email = form.email.value;
      const password_digest = form.password_digest.value;
      //const Review = form.Review.value;
      try {
        const res = await fetch('/api/users/login', { 
          method: 'POST', 
          body: JSON.stringify({email, password_digest}),
          headers: {'Content-Type': 'application/json'}
        });
        const data = await res.json();
        //console.log(data);
        if (data.user){
            location.assign('/profile');
          }
        if(data.errors) {
          //document.getElementById('errshow').style.display = 'block'
          document.getElementById('err').innerHTML = data.errors 
        }if(data.err.errors){
          /*document.getElementById('errshow').style.display = 'block'*/
          document.getElementById('err').innerHTML = data.err.errors[0].msg
        } 
    }catch (err) {
          console.log(err);
      }    
    })
</script>



<%- include('layouts/footer.ejs') %>


  <script>
  // Acc
    $(document).on("click", ".naccs .menu div", function() {
      var numberIndex = $(this).index();

      if (!$(this).is("active")) {
          $(".naccs .menu div").removeClass("active");
          $(".naccs ul li").removeClass("active");

          $(this).addClass("active");
          $(".naccs ul").find("li:eq(" + numberIndex + ")").addClass("active");

          var listItemHeight = $(".naccs ul")
            .find("li:eq(" + numberIndex + ")")
            .innerHeight();
          $(".naccs ul").height(listItemHeight + "px");
        }
    });

    function myFunction1() {
  var x = document.getElementById("myDIV1");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}

function myFunction2() {
  var x = document.getElementById("myDIV2");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}



function myFunction3() {
  var x = document.getElementById("myDIV3");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}


function myFunction4() {
  var x = document.getElementById("myDIV4");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}

$(document).ready(function() {
$('#dtBasicExample').DataTable();
$('.dataTables_length').addClass('bs-select');
} );

$(document).ready(function() {
$('#dtBasicExample1').DataTable();
$('.dataTables_length').addClass('bs-select');
} );


$(document).ready(function() {
$('#dtBasicExample2').DataTable();
$('.dataTables_length').addClass('bs-select');
} );



$(document).ready(function() {
$('#dtBasicExample3').DataTable();
$('.dataTables_length').addClass('bs-select');
} );


function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
  </script>
</body>
</html>